<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
        <title>ɹ ɐ ɥ ʞ ǝ ɥ s  - python</title>
        <link rel="stylesheet" href="http://shon.github.com/theme/css/main.css">
                <link href="http://shon.github.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="ɹ ɐ ɥ ʞ ǝ ɥ s  Atom Feed" />
                
        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://shon.github.com/">ɹ ɐ ɥ ʞ ǝ ɥ s  </a></h1>
                <nav><ul>
                                    <li><a href="http://shon.github.com/archives.html">Archives</a></li>
                                                    <li><a href="http://shon.github.com/2012/06/pages/about-me.html">About&nbsp;me</a></li>
                                                                    <li ><a href="http://shon.github.com/category/blog.html">Blog</a></li>
                                                </ul></nav>
        </header><!-- /#banner -->
                
            

                            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="http://shon.github.com/2013/01/json-rpc.html"><span class="caps">JSON</span>-<span class="caps">RPC</span></a></h1> 
                    <footer class="post-info">
        <abbr class="published" title="2013-01-13T06:10:00">
                Sun 13 January 2013
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="http://shon.github.com/author/shekhar-tiwatne.html">Shekhar Tiwatne</a>
        </address>
        <p>In <a href="http://shon.github.com/category/blog.html">Blog</a>. </p>
<p>tags: <a href="http://shon.github.com/tag/python.html">python</a><a href="http://shon.github.com/tag/programming.html">programming</a><a href="http://shon.github.com/tag/jsonrpc.html">jsonrpc</a><a href="http://shon.github.com/tag/design.html">design</a></p>
</footer><!-- /.post-info --><p><a class="reference external" href="http://json-rpc.org/"><span class="caps">JSON</span>-<span class="caps">RPC</span></a> protocol has got much less attention than it deserves. It is so elegant and simple. Our experience of working on <span class="caps">JSON</span>-<span class="caps">RPC</span> was&nbsp;plesant.</p>
<p>For uninitiated <span class="caps">JSON</span>-<span class="caps">RPC</span> is lightweight remote procedure call protocol similar to <span class="caps">XML</span>-<span class="caps">RPC</span>. I find it incredibly useful in building easy to maintain&nbsp;applications.</p>
<p>We effectively used <span class="caps">JSONRPC</span> in our project <a class="reference external" href="http://cowoop.net/">Cowoop</a> to make it easy to debug&nbsp;application.</p>
<p>It is often seen that unless it is an open source application, in the design phase very little attention is paid towards maintainablity of the application. With many no so clearly seperated layers it makes it increasingly difficult to debug. This makes bug fixing painful and no fun process for those who are working on it. And further these in most cases are not the architects who designed the application. Architect is either moved on to design some other project or is working on next&nbsp;release.</p>
<p>Lets directly jump to example code. So here is my python&nbsp;function.</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="mi">3</span>
</pre></div>
<p>Project exposes above function <cite>add</cite> using <span class="caps">JSON</span>-<span class="caps">RPC</span>. We use <a class="reference external" href="http://flask.pocoo.org/">Flask</a> + <a class="reference external" href="http://packages.python.org/jsonrpc2">jsonrpc2</a> to serve <span class="caps">JSONRPC</span> over&nbsp;http.</p>
<p>Let us see how does jquery <span class="caps">JSONRPC</span> plugin calls this&nbsp;<span class="caps">API</span>.</p>
<img alt="src/images/001.png" src="src/images/001.png" />
<p>Result</p>
<img alt="src/images/003.png" src="src/images/003.png" />
<p>jsonrpc function that you see in above screenshot is part of our js client library. Really it is a a few lines wrapper on top of <a class="reference external" href="https://github.com/datagraph/jquery-jsonrpc">jquery jsonrpc plugin</a> function&nbsp;jsonRPC.request()</p>
<p>Do you think <span class="caps">JSONRPC2</span> is fairly successful in helping create a maintainable&nbsp;application?</p>
<div class="section" id="challenges">
<h2>Challenges</h2>
<div class="section" id="authentication">
<h3>Authentication</h3>
<p>There is no word in <span class="caps">JSONRPC2</span> specification about Authentication yet (not a complaint) . But I think it is necessary for further success of <span class="caps">JSONRPC</span>. It&#8217;s possible to use http auth but not many would prefer it so I see people implementing two type of&nbsp;solutions.</p>
<div class="section" id="authentication-using-cookies">
<h4>Authentication | Using&nbsp;cookies</h4>
<p>Session id is kept in authcookie and sent/validated with every http&nbsp;request.</p>
</div>
<div class="section" id="authentication-using-special-parameters-in-rpc-call">
<h4>Authentication | Using special parameters in rpc&nbsp;call</h4>
<p>Session id is passed as special parameter in every rpc call. For eg. above add function may be invoked like&nbsp;below</p>
<div class="highlight"><pre><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">_session</span><span class="o">=</span><span class="s">&#39;somesessionid&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="authentication-ideal">
<h4>Authentication |&nbsp;Ideal</h4>
<pre class="literal-block">
--&gt; { &quot;method&quot;: &quot;login&quot;, &quot;params&quot;: {&quot;username&quot;: &quot;me&quot;, &quot;password&quot;: &quot;secret&quot;}, &quot;id&quot;: 1}
&lt;-- { &quot;result&quot;: &quot;somesessionid&quot;, &quot;error&quot;: null, &quot;id&quot;: 1}
--&gt; { &quot;method&quot;: &quot;echo&quot;, &quot;params&quot;: [&quot;Hello protected JSON-RPC&quot;], &quot;id&quot;: 1, &quot;session&quot;: &quot;somesessionid&quot;}
&lt;-- { &quot;result&quot;: &quot;Hello protected JSON-RPC&quot;, &quot;error&quot;: null, &quot;id&quot;: 1}
</pre>
</div>
</div>
</div>
<p>There are <a href="http://shon.github.com/2013/01/json-rpc.html#disqus_thread">comments</a>.</p>                </article>
                            </aside><!-- /#featured -->
                            <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">
                                                

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="http://shon.github.com/2010/11/redis-patterns-search.html" rel="bookmark"
                           title="Permalink to Redis patterns | search">Redis patterns |&nbsp;search</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2010-11-26T02:55:00">
                Fri 26 November 2010
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="http://shon.github.com/author/shekhar-tiwatne.html">Shekhar Tiwatne</a>
        </address>
        <p>In <a href="http://shon.github.com/category/blog.html">Blog</a>. </p>
<p>tags: <a href="http://shon.github.com/tag/python.html">python</a><a href="http://shon.github.com/tag/autocomplete.html">autocomplete</a><a href="http://shon.github.com/tag/redis.html">redis</a></p>
</footer><!-- /.post-info -->                <div class="section" id="problem">
<h2>Problem</h2>
<p>You want to implement search against user objects stored in redis using
Python. Something like querying for all user ids whose username begins
with&nbsp;&#8220;an&#8221;.</p>
</div>
<div class="section" id="solution">
<h2>Solution</h2>
<p>Here we have user objects stored in as hashes with &#8220;user:obj:&#8221; as&nbsp;prefix.</p>
<p>For&nbsp;example</p>
<pre class="literal-block">
user:obj:3955 {id: 3955, username: 'John ...</pre></div>
                <a class="readmore" href="http://shon.github.com/2010/11/redis-patterns-search.html">read more</a>
                <p>There are <a href="http://shon.github.com/2010/11/redis-patterns-search.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="http://shon.github.com/2009/03/unicode.html" rel="bookmark"
                           title="Permalink to Unicode">Unicode</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2009-03-28T09:35:00">
                Sat 28 March 2009
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="http://shon.github.com/author/shekhar-tiwatne.html">Shekhar Tiwatne</a>
        </address>
        <p>In <a href="http://shon.github.com/category/blog.html">Blog</a>. </p>
<p>tags: <a href="http://shon.github.com/tag/utf-8.html">utf-8</a><a href="http://shon.github.com/tag/unicode.html">unicode</a><a href="http://shon.github.com/tag/python.html">python</a></p>
</footer><!-- /.post-info -->                <p>Pulling your hairs over some i18n bug or you fix it but are not able to
explain what. This is little help in getting fair idea about
unicode/codecs/encoding/decoding&nbsp;etc.</p>
<p>Quick&nbsp;tips:</p>
<ol class="loweralpha simple">
<li>It does not make sense to have a string without knowing what encoding it&nbsp;uses.</li>
<li>Utf-8 ...</li></ol>
                <a class="readmore" href="http://shon.github.com/2009/03/unicode.html">read more</a>
                <p>There are <a href="http://shon.github.com/2009/03/unicode.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="http://shon.github.com/2009/02/my-open-source-projects.html" rel="bookmark"
                           title="Permalink to My open source projects">My open source&nbsp;projects</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2009-02-17T07:26:00">
                Tue 17 February 2009
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="http://shon.github.com/author/shekhar-tiwatne.html">Shekhar Tiwatne</a>
        </address>
        <p>In <a href="http://shon.github.com/category/blog.html">Blog</a>. </p>
<p>tags: <a href="http://shon.github.com/tag/stockie.html">stockie</a><a href="http://shon.github.com/tag/python.html">python</a><a href="http://shon.github.com/tag/code.html">code</a><a href="http://shon.github.com/tag/google.html">google</a><a href="http://shon.github.com/tag/syncer.html">syncer</a><a href="http://shon.github.com/tag/opensource.html">opensource</a></p>
</footer><!-- /.post-info -->                <ul class="simple">
<li><a class="reference external" href="https://github.com/Cowoop/cowspa3">Cowoop</a>: Open source application to manage coworking&nbsp;business.</li>
<li><a class="reference external" href="http://pypi.python.org/pypi/httpagentparser">httpagentparser</a>: Python <span class="caps">HTTP</span> Agent&nbsp;Parser.</li>
<li><a class="reference external" href="http://pypi.python.org/pypi/sphc"><span class="caps">SPHC</span></a>: Simple Pythonic <span class="caps">HTML</span>&nbsp;Creator.</li>
<li><a class="reference external" href="http://code.google.com/p/syncer/">Syncer</a>: A event daemon based on&nbsp;Pyro.</li>
<li><a class="reference external" href="http://code.google.com/p/stockie/">Stockie</a>: A personal portfolio manager for an&nbsp;Investor</li>
</ul>

                <a class="readmore" href="http://shon.github.com/2009/02/my-open-source-projects.html">read more</a>
                <p>There are <a href="http://shon.github.com/2009/02/my-open-source-projects.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            </ol><!-- /#posts-list -->
                            <p class="paginator">
        Page 1 / 2
            <a href="http://shon.github.com/tag/python2.html">&raquo;</a>
    </p>
                        </section><!-- /#content -->
                    <section id="extras" class="body">
                                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://shon.github.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>
                            
                                                    <li><a href="https://plus.google.com/109841397231691349117">google-plus</a></li>
                                                    <li><a href="http://github.com/shon">github</a></li>
                                                    <li><a href="http://twitter.com/shon_">twitter</a></li>
                                                    <li><a href="http://facebook.com/shon0">facebook</a></li>
                                                </ul>
                </div><!-- /.social -->
                </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'shon-blog';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>